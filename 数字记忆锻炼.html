<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>数字记忆锻炼</title>
    <script>
        var targetNum;
        var level = 1;
        var time = 3;
        var countdown = setInterval(timerCountDown, 1000);
        var finished = false;

        function setTargetNum(){
            let min = 10**(level-1);
            let max = 10**level;
            targetNum = Math.floor(Math.random() * (max - min) ) + min
            document.getElementById("targetnumfield").innerHTML = targetNum;
        }

        function setTime(){
            time = 2+level;
        }

        function timerCountDown(){
            document.getElementById("timer").innerHTML = "剩余记忆时间: " + time;
            if(time===0){
                hideTargetNum();
                unlockInput();
            }
            if(time>0) {
                time--;
            }
        }

        function hideTargetNum(){
            document.getElementById("targetnumfield").innerHTML = "---";
        }


        function unlockInput(){
            document.getElementById("input").disabled = false;
            document.getElementById("check").disabled = false;
        }

        function lockInput(){
            document.getElementById("input").disabled = true;
            document.getElementById("check").disabled = true;
        }

        function check(){
            if(!finished) {
                let inputNum = document.getElementById("input").value;

                if (inputNum == targetNum) {
                    nextLevel()
                } else {
                    endGame()
                }
            }


        }

        function nextLevel(){
            level++;
            document.getElementById("level").innerHTML = "关卡" + level;
            document.getElementById("input").value = "";
            lockInput()
            setTargetNum();
            setTime();
        }

        function endGame(){
            finished = true;
            document.getElementById("gameover").innerHTML = "数字错误，游戏结束！";
        }

        function restart(){
            finished = false;
            document.getElementById("gameover").innerHTML = "";
            document.getElementById("level").innerHTML = "关卡1";
            document.getElementById("input").value = "";
            level = 1;
            lockInput()
            setTargetNum();
            setTime();
        }

    </script>
    <style>
        #gamecontainer{
            background-color: lightgray;
            text-align: center;
            place-items: center;
        }
        #infopanel{
            background-color: #aeadad;
            width: 25%;
            border: 2px solid black;
        }

        #check{
            background-color: lightgreen;
        }

        #gameover{
            color: red;
        }

        #input{
            width: 800px;
        }

        #targetnumfield{
            font-size: 55px;
        }

        h1{
            font-size: 50px;
        }

        p{
            font-size: 30px;
            margin-top: 2px;
            margin-bottom: 2px;
        }

        .g1{
            height: 50px;
            font-size: 25px;
        }

        .g2{
            height: 50px;
            font-size: 25px;
        }
    </style>
</head>
<body onload="setTargetNum()">
<div id="gamecontainer">
    <h1>数字记忆锻炼</h1>
    <div id="infopanel">
        <p id="level">关卡1</p>
        <p id="timer">剩余记忆时间:</p>
        <p id="targetnumfield"></p>
    </div>
    <br>
    <input type="number" class="g2" id="input" disabled>
    <button class="g1" id="check" onclick="check()" disabled>提交答案</button>
    <br>
    <br>
    <p id="gameover"></p>
    <button class="g1" id="restart" onclick="restart()">重新开始</button>
</div>



</body>
</html>